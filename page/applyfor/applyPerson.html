<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<script src="../../js/mui.js"></script>
		<link href="../../css/mui.css" rel="stylesheet" />
		<link rel="stylesheet" href="../../css/share_main.css" />
		<style>
			
			 .mui-table-view-cell .select_sex input{
				height: auto; 
				font-size: 14px; 
				width: 14px;
			}
			.select_sex label{
				color: silver;
			}
			.nation_mark {
				display: none;
				position: absolute;
				z-index: 998;
				background-color: rgba(0, 0, 0, .4);
				top: 0;。com
				
				left: 0;
				right: 0;
				bottom: 0;
			}
			.spplay_select_type{
				width: 80%;  
				position: absolute;
				z-index: 999;  
				left: 50%;
			    margin-left:-40%;
			    top: 50%;
			    
			    text-align: center;
			    margin-top: -40%;
			/*	display: none;*/
				color: silver;
				overflow: hidden;
			} 
			.spplay_select_type ul li{
				padding: 0;
				height: 48px;
				font-size: 14px;
				line-height: 48px; 
				color: #000;
			}
			.nation_select{
				width: 70%;
				height: 80%;
				z-index: 999;
				overflow-y: scroll;
				top: 10%;
				left: 50%;
				margin-left: -35%;
				position: absolute;
				background-color: white;
				display: none;
			} 		

			.mui-scroll-wrapper {
				top: 52px;
				bottom: 60px;
			}
		</style>
	</head>

	<body>
		<!--国籍列表-->
		<div class="nation_mark"></div>
		<div class="nation_select " id='nation_select_'>
			 <ul class="mui-table-view">
			 	<li class="mui-table-view-cell">中国</li>
			 	<li class="mui-table-view-cell">美国</li>
			 	<li class="mui-table-view-cell">日本</li>
			 	<li class="mui-table-view-cell">韩国</li>
			 	<li class="mui-table-view-cell">朝鲜</li>
			 	<li class="mui-table-view-cell">德国</li>
			 	<li class="mui-table-view-cell">英国</li>
			 	<li class="mui-table-view-cell">法国</li>
			 	<li class="mui-table-view-cell">瑞士</li>
			 	<li class="mui-table-view-cell">美国</li>
			 	<li class="mui-table-view-cell">加拿大</li>
			 	<li class="mui-table-view-cell">意大利</li>
			 	<li class="mui-table-view-cell">柬埔寨</li>
			 	<li class="mui-table-view-cell">老挝</li>
			 	<li class="mui-table-view-cell">泰国</li>
			 	<li class="mui-table-view-cell">俄罗斯</li>
			 	<li class="mui-table-view-cell">澳大利亚</li>
			 	<li class="mui-table-view-cell">巴基斯坦</li>
			 	<li class="mui-table-view-cell">以色列</li>
			 	<li class="mui-table-view-cell">缅甸</li>
			 	<li class="mui-table-view-cell">蒙古</li>
			 	<li class="mui-table-view-cell">牙买加</li>
			 	<li class="mui-table-view-cell">印度</li>
			 	<li class="mui-table-view-cell">非洲</li>
			 	<li class="mui-table-view-cell">匈牙利</li>
			 	<li class="mui-table-view-cell">奥地利</li>
			 	<li class="mui-table-view-cell">瑞士</li>
			 </ul>  
		</div>
		<!--证件选择-->
		<div class="spplay_select_type mui-popover" id="id_type">
			<ul class="mui-table-view">
				<li class="mui-table-view-cell mui-text-center">学生证</li>
				<li class="mui-table-view-cell mui-text-center">身份证</li>
				<li class="mui-table-view-cell mui-text-center">残疾证</li>
				<li class="mui-table-view-cell mui-text-center">军人证</li>
				<li class="mui-table-view-cell mui-text-center">驾驶证</li>
			</ul>
		</div>
		<header class="mui-bar mui-bar-nav nav_header ">
			<img src="../../img/left.png" alt="" class="header_left_img mui-action-back" />
			<span>Application For Deliverer</span>
		</header>
		<div class="mui-content apply_content">
			<div class="mui-scroll-wrapper">
				<div class="mui-scroll">
					<ul class="mui-table-view top_header">
						<li class="mui-table-view-divider"> <span>Basic Information</span></li>
						<li class="mui-table-view-cell">
							<img src="../../img/name.png" class=" li_left_img" alt="" />
							<div class="li_input_l">
								<input type="text" class="apply_input" placeholder="familyName" id="familyName" />
							</div>
						</li>
						  
						<li class="mui-table-view-cell">
							<img src="../../img/name.png" class="li_left_img" alt="" />
							<div class="li_input_l">
								<input type="text" class="apply_input" placeholder="firstName" id="firsetName" />
							</div>
						</li>
						<li class="mui-table-view-cell">
							<img src="../../img/name.png" class="li_left_img" alt="" />
							<div class="li_input_l select_sex">
								<input type="radio" name="sex" value="man" checked="checked" id="person_sex" />
								<lable style="color: silver;">man </lable>
								<input  type="radio" name="sex" />
								<lable style="color: silver;">women </lable>
							</div>
						</li>
						<li class="mui-table-view-cell" id="apply_nation">
							<img src="../../img/nationality.png" class="li_left_img" alt="" />
							<!--<span id="nation">select nation</span>-->
							<div class="li_input_l" >
								<input type="text" placeholder="select nation" id="nation" readonly="readonly"/>
							</div>
						</li>
						<li class="mui-table-view-cell">
							<img src="../../img/4.png" class="li_left_img" alt="" />
							<div class="li_input_l">
								<input type="text" class="apply_input" placeholder="place of residence" id="apply_place" />
							</div>
						</li>
						<li class="mui-table-view-cell ">
							<img src="../../img/emergency.png" class="li_left_img" alt="" />
							<img src="../../img/personbg.png" id="choose-contacts" class="li_right_img" alt="" />
							<div class="li_input_s">
								<input type="text" class="apply_input" placeholder="emergency contact " id="apply_emergencyC" />
							</div>
						</li>
						<li class="mui-table-view-cell">
							<img src="../../img/mobile.png" class="li_left_img" alt="" />
							<div class="li_input_l">
								<input type="number" class="apply_input" placeholder="mobile" id="apply_mobile" />
							</div>
						</li>
						<li class="mui-table-view-cell">
							<img src="../../img/id.png" class=" li_left_img" alt="" />
							<div class="li_input_l">
								<input type="number" class="apply_input" placeholder="identity" id="identity" />
							</div>
						</li>
						<!--			<ul class="mui-table-view apply_padding" >-->
						<li class="mui-table-view-cell" id="select_type">
							<img src="../../img/id.png" class=" li_left_img" alt="" />
							<img src="../../img/down.png" class=" li_right_img" alt="" />
							<div class="li_input_s">
								<input type="text" class="apply_input" placeholder="请选择证件" readonly="readonly" id="select_type_show" />
							</div>
						</li>
						
						<li class="mui-table-view-cell" style="">
							<img src="../../img/id.png" class=" li_left_img" alt="" />
							<div class="li_input_l">
								<input type="number" class="apply_input" placeholder="请输入对应的证件号" id="id_number" />
							</div>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<!--<div class="apply_footer">
			<div class="apply_button" id="apply_submit"><span>Next Step</span></div>
		</div>-->
		<footer class="mui-bar mui-bar-footer">
			<button class="mui-btn nav_footer" id="apply_submit"><span>Next Step</span></button>
		</footer>
	</body>
	<script src="../../js/jquery.min.js"></script>
	<script src="../../js/utils.js"></script>
	<script>
		mui.plusReady(function() {
			plus.webview.currentWebview().setStyle({
				scrollIndicator: 'none'
			});
			mui('.mui-scroll-wrapper').scroll();
			var flag = true;
			$('#apply_submit').on('tap',function(){
				check_info();
			}) 
			function check_info() { //检测填写情况
				var v_fam = $('#firsetName').val().trim();
				var v_fir = $('#familyName').val().trim();
				var v_nation = $('#nation').val();
				var v_address = $('#apply_place').val().trim();
				var v_emer = $('#apply_emergencyC').val().trim();
				var v_mo = $('#apply_mobile').val().trim();
				var v_idtT=$('#select_type_show').val().trim();
				var v_identity = $('#identity').val().trim();
				var check = $('#person_sex').attr('checked');
				var sex = (check == 'checked') ? '1' : '2';
				var id_nu = $('#id_number').val().trim();
				var car_info_status = plus.storage.getItem('carInfoSta'); //得到carInfo的资料填写情况
				if (true) {
					if (!v_fam) {
						mui.toast('请填写你的名');
						flag = false;
						return;
					}
					if (!v_fir) {
						mui.toast('请填写你的姓');
						flag = false;
						return;
					}
					if (!v_nation) {
						mui.toast('请填写你的国籍');
						flag = false;
						return;
					}
					if (!v_address) {
						mui.toast('请填写你的地址');
						flag = false;
						return;
					}
					if (!v_emer) {
						mui.toast('请填写你的紧急联系人');
						flag = false;
						return;
					}
					if (!v_mo) {
						mui.toast('请填写你的急联系人电话号码');
						flag = false;
						return;
					}
					if (!v_identity) {
						mui.toast('请填写你的身份证号码');
						flag = false;
						return;
					}
					if (!v_idtT) {
						mui.toast('请先选择证件类型！');
						flag = false;
						return;
					}
					if (!id_nu) {
						mui.toast('请输入证件号码！');
						flag = false;
						return;
					}
				}
				if (flag) {
					data_first = {
						nation: v_nation,
						address: v_address,
						identity: v_identity,
						firstName: v_fir,
						familyName: v_fam,
						armPhone: v_mo,  
						armUser: v_emer,
						sex: sex,
						idType: v_idtT,
						creditCard: id_nu
					}
					plus.storage.setItem('nation_data1', JSON.stringify(data_first));
				}
				mui.toast('请完成下一步操作');
				openWindow("./idcard.html");
			}
			//证件类型
			$('#id_type ul li').on('tap',function(){
				 var id_type_name=$(this).text();
				 $('#select_type_show').val(id_type_name);
				 mui('#id_type').popover('toggle');
				
			})
			document.querySelector(".nation_mark").addEventListener("click", function() {
				$('.nation_mark').css('display', 'none');
				$('#nation_select_').css('display','none');
			})
			$('#apply_nation').on('click', function() {
				$('.nation_mark').css('display', 'block');
				$('#nation_select_').css('display', 'block');
			})
			$('#nation_select_ ul li').on('click', function() {
				var nation = $(this).text();
				$('#nation').val(nation);
				$('.nation_mark').css('display', 'none');
				$('#nation_select_').css('display', 'none');
			})
			$('#select_type').on('tap', function() {
				mui('#id_type').popover('toggle');
			})
			
			// 选择联系人button按钮
			document.getElementById("choose-contacts").addEventListener("tap", function(){
				openWindow("./choose-contact.html");
			})
			
			window.addEventListener("choose:contacts", function(eve){
				document.getElementById("apply_emergencyC").value = eve.detail.name;
				document.getElementById("apply_mobile").value = eve.detail.tel;
			})
		})
	</script>
</html>

