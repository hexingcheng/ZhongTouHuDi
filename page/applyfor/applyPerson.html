<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<script src="../../js/mui.js"></script>
		<link href="../../css/mui.css" rel="stylesheet" />
		<link rel="stylesheet" href="apply.css" />
		<style>
			.apply_header {
				width: 100%;
				height: 52px;
				line-height: 52px;
				font-size: 16px;
				color: #FFFFFF;
				background-color: #2A9F59;
			}
			.apply_header:after {
				box-shadow: none;
			}
			.apply_title {
				margin-left: .6em;
			}
			.apply_content {
				padding: 0.5em;
				font-size: 14px;
				color: silver;
			}
			.mui-content .mui-table-view-cell {
				height: 50px;
				padding: 0;
			}
			.mui-table-view-cell img {
				width: 34px;
				height: 34px;
				margin: 8px 7px;
			}
			.apply_input_r {
				height: 50px;
				margin-right: 52px;
				overflow: hidden;
			}
			.apply_input_l {
				height: 50px;
				overflow: hidden;
			}
			.mui-content .apply_input {
				width: 100%;
				height: 50px;
				overflow: hidden;
				font-size: 14px;
				border: 0;
				padding-left: 0;
				padding-right: 0;
				margin-bottom: 0;
			}
			.apply_footer {
				width: 100%;
				position: fixed;
				bottom: 0;
				overflow: hidden;
			}
			.apply_footer .apply_button {
				width: 80%;
				height: 48px;
				line-height: 48px;
				margin: 0 auto;
				color: white;
				font-size: 16px;
				text-align: center;
				margin-bottom: .2em;
				background-color: #054859;
			}
			.mui-content .mui-table-view {
				margin-top: 1em;
			}
			.apply_info {
				overflow: hidden;
			}
			.apply_idCard {
				overflow: hidden;
				font-size: 14px;
				color: silver;
				border: 1px solid silver;
			}
			.apply_idcard_div {
				width: 95%;
				height: 12em;
				overflow: hidden;
				margin: .2em auto;
			}
			.apply_idcard_div .img_div {
				width: 3em;
				height: 4em;
				margin: 4em 0;
				text-align: center;
				line-height: 1em;
				float: right;
			}
			.nation_mark {
				display: none;
				position: absolute;
				z-index: 998;
				background-color: rgba(0, 0, 0, .4);
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
			}
			.apply_idpho {
				height: 12em;
				padding: 0 1em;
				/*	background-color: #F6F6F6;*/
				
				overflow: hidden;
				text-align: center;
				margin-right: 3em;
				border: 2px solid silver;
			}
			.apply_idpho img {
				width: 34px;
				height: 34px;
				margin: .2em auto;
			}
			.nation_select{
				width: 70%;
				height: 80%;
				z-index: 999;
				overflow-y: scroll;
				top: 10%;
				left: 50%;
				margin-left: -35%;
				position: absolute;
				background-color: white;
				display: none;
			} 		
			.apply_sex {
				width: 150px;
				height: 50px;
				line-height: 50px;
				float: right;
				text-align: center;
			}
			.apply_bor_b {
				border-bottom: 1px solid #E3E2E5;
			}
			.mui-scroll-wrapper {
				top: 52px;
				bottom: 60px;
			}
			.mui-content .mui-table-view {
				margin-top: 0;
			}
		</style>
	</head>

	<body>
		<!--国籍列表-->
		<div class="nation_mark"></div>
		<div class="nation_select " id='nation_select_'>
			 <ul class="mui-table-view">
			 	<li class="mui-table-view-cell">中国</li>
			 	<li class="mui-table-view-cell">美国</li>
			 	<li class="mui-table-view-cell">日本</li>
			 	<li class="mui-table-view-cell">韩国</li>
			 	<li class="mui-table-view-cell">朝鲜</li>
			 	<li class="mui-table-view-cell">德国</li>
			 	<li class="mui-table-view-cell">英国</li>
			 	<li class="mui-table-view-cell">法国</li>
			 	<li class="mui-table-view-cell">瑞士</li>
			 	<li class="mui-table-view-cell">美国</li>
			 	<li class="mui-table-view-cell">加拿大</li>
			 	<li class="mui-table-view-cell">意大利</li>
			 	<li class="mui-table-view-cell">柬埔寨</li>
			 	<li class="mui-table-view-cell">老挝</li>
			 	<li class="mui-table-view-cell">泰国</li>
			 	<li class="mui-table-view-cell">俄罗斯</li>
			 	<li class="mui-table-view-cell">澳大利亚</li>
			 	<li class="mui-table-view-cell">巴基斯坦</li>
			 	<li class="mui-table-view-cell">以色列</li>
			 	<li class="mui-table-view-cell">缅甸</li>
			 	<li class="mui-table-view-cell">蒙古</li>
			 	<li class="mui-table-view-cell">牙买加</li>
			 	<li class="mui-table-view-cell">印度</li>
			 	<li class="mui-table-view-cell">非洲</li>
			 	<li class="mui-table-view-cell">匈牙利</li>
			 	<li class="mui-table-view-cell">奥地利</li>
			 	<li class="mui-table-view-cell">瑞士</li>
			 </ul>  
		</div>
		<!--证件选择-->
		<div class="spplay_select_type mui-popover" id="id_type">
			<ul class="mui-table-view">
				<li class="mui-table-view-cell">学生证</li>
				<li class="mui-table-view-cell">身份证</li>
				<li class="mui-table-view-cell">残疾证</li>
				<li class="mui-table-view-cell">军人证</li>
				<li class="mui-table-view-cell">驾驶证</li>
				
			</ul>
		</div>
		<header class="mui-bar mui-bar-nav apply_header ">
			<img src="../../img/left.png" alt="" class="left_img mui-action-back" />
			<span>Application For Deliverer</span>
		</header>
		<div class="mui-content apply_content">
			<div class="mui-scroll-wrapper">
				<div class="mui-scroll">
					<ul class="mui-table-view">
						<li class="mui-table-view-divider"> <span>Basic Information</span></li>
						<li class="mui-table-view-cell">
							<img src="../../img/name.png" class="mui-pull-left" alt="" />
							<div class="apply_input_middle">
								<input type="text" class="apply_input" placeholder="familyName" id="familyName" />
							</div>
						</li>
						  
						<li class="mui-table-view-cell">
							<img src="../../img/name.png" class="mui-pull-left" alt="" />
							<div class="apply_input_middle">
								<input type="text" class="apply_input" placeholder="firstName" id="firsetName" />
							</div>
						</li>
						<li class="mui-table-view-cell">
							<img src="../../img/name.png" class="mui-pull-left" alt="" />
							<div class="apply_input_middle">
								<input type="radio" name="sex" value="man" checked="checked" id="person_sex" />
								<lable>man </lable>
								<input type="radio" name="sex" />
								<lable>women </lable>
							</div>
						</li>
						<li class="mui-table-view-cell" id="apply_nation">
							<img src="../../img/nationality.png" class="mui-pull-left" alt="" />
							<span id="nation">select nation</span>
						</li>
						<li class="mui-table-view-cell">
							<img src="../../img/4.png" class="mui-pull-left" alt="" />
							<div class="apply_input_l">
								<input type="text" class="apply_input" placeholder="place of residence" id="apply_place" />
							</div>
						</li>
						<li class="mui-table-view-cell ">
							<img src="../../img/emergency.png" class="mui-pull-left" alt="" />
							<img src="../../img/personbg.png" id="choose-contacts" class="mui-pull-right" alt="" />
							<div class="apply_input_r">
								<input type="text" class="apply_input" placeholder="emergency contact " id="apply_emergencyC" />
							</div>
						</li>
						<li class="mui-table-view-cell">
							<img src="../../img/mobile.png" class="mui-pull-left" alt="" />
							<div class="apply_input_l">
								<input type="number" class="apply_input" placeholder="mobile" id="apply_mobile" />
							</div>
						</li>
						<li class="mui-table-view-cell">
							<img src="../../img/id.png" class="mui-pull-left" alt="" />
							<div class="apply_input_l">
								<input type="number" class="apply_input" placeholder="identity" id="identity" />
							</div>
						</li>
						<!--			<ul class="mui-table-view apply_padding" >-->
						<li class="mui-table-view-cell" id="select_type">
							<img src="../../img/id.png" class="mui-pull-left" alt="" />
							<img src="../../img/down.png" class="mui-pull-right" alt="" />
							<div class="apply_input_r">
								<input type="text" class="apply_input" placeholder="请选择证件" readonly="readonly" id="select_type_show" />
							</div>
						</li>
						
						<li class="mui-table-view-cell" style="">
							<img src="../../img/id.png" class="mui-pull-left" alt="" />
							<div class="apply_input_r">
								<input type="number" class="apply_input" placeholder="请输入对应的证件号" id="id_number" />
							</div>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<div class="apply_footer">
			<div class="apply_button" id="apply_submit"><span>Next Step</span></div>
		</div>
	</body>
	<script src="../../js/jquery.min.js"></script>
	<script src="../../js/utils.js"></script>
	<script>
		mui.plusReady(function() {
			plus.webview.currentWebview().setStyle({
				scrollIndicator: 'none'
			});
			mui('.mui-scroll-wrapper').scroll();
			var flag = true;
			$('#apply_submit').on('tap',function(){
				check_info();
			}) 
			function check_info() { //检测填写情况
				var v_fam = $('#firsetName').val().trim();
				var v_fir = $('#familyName').val().trim();
				var v_nation = $('#nation').text();
				var v_address = $('#apply_place').val().trim();
				var v_emer = $('#apply_emergencyC').val().trim();
				var v_mo = $('#apply_mobile').val().trim();
				var v_idtT=$('#select_type_show').val().trim();
				var v_identity = $('#identity').val().trim();
				var check = $('#person_sex').attr('checked');
				var sex = (check == 'checked') ? '1' : '2';
				var id_nu = $('#id_number').val().trim();
				var car_info_status = plus.storage.getItem('carInfoSta'); //得到carInfo的资料填写情况
				if (true) {
					if (!v_fam) {
						mui.toast('请填写你的名');
						flag = false;
						return;
					}
					if (!v_fir) {
						mui.toast('请填写你的姓');
						flag = false;
						return;
					}
					if (!v_nation) {
						mui.toast('请填写你的国籍');
						flag = false;
						return;
					}
					if (!v_address) {
						mui.toast('请填写你的地址');
						flag = false;
						return;
					}
					if (!v_emer) {
						mui.toast('请填写你的紧急联系人');
						flag = false;
						return;
					}
					if (!v_mo) {
						mui.toast('请填写你的急联系人电话号码');
						flag = false;
						return;
					}
					if (!v_identity) {
						mui.toast('请填写你的身份证号码');
						flag = false;
						return;
					}
					if (!v_idtT) {
						mui.toast('请先选择证件类型！');
						flag = false;
						return;
					}
					if (!id_nu) {
						mui.toast('请输入证件号码！');
						flag = false;
						return;
					}
				}
				if (flag) {
					data_first = {
						nation: v_nation,
						address: v_address,
						identity: v_identity,
						firstName: v_fir,
						familyName: v_fam,
						armPhone: v_mo,  
						armUser: v_emer,
						sex: sex,
						idType: v_idtT,
						creditCard: id_nu
					}
					plus.storage.setItem('nation_data1', JSON.stringify(data_first));
				}
				mui.toast('请完成下一步操作');
				openWindow("./idcard.html");
			}
			//证件类型
			$('#id_type ul li').on('tap',function(){
				 var id_type_name=$(this).text();
				 $('#select_type_show').val(id_type_name);
				 mui('#id_type').popover('toggle');
				
			})
			document.querySelector(".nation_mark").addEventListener("click", function() {
				$('.nation_mark').css('display', 'none');
				$('#nation_select_').css('display','none');
			})
			$('#apply_nation').on('click', function() {
				$('.nation_mark').css('display', 'block');
				$('#nation_select_').css('display', 'block');
			})
			$('#nation_select_ ul li').on('click', function() {
				var nation = $(this).text();
				$('#nation').html(nation);
				$('.nation_mark').css('display', 'none');
				$('#nation_select_').css('display', 'none');
			})
			$('#select_type').on('tap', function() {
				mui('#id_type').popover('toggle');
			})
			
			// 选择联系人button按钮
			document.getElementById("choose-contacts").addEventListener("tap", function(){
				openWindow("./choose-contact.html");
			})
			
			window.addEventListener("choose:contacts", function(eve){
				document.getElementById("apply_emergencyC").value = eve.detail.name;
				document.getElementById("apply_mobile").value = eve.detail.tel;
			})
		})
	</script>
</html>

