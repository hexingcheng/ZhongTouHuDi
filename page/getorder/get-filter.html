<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
    <link href="../../css/mui.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="get-order-comment.css"/>
    <link rel="stylesheet" href="../../css/jquery.range.css"/>
    <script src="../../js/mui.min.js"></script>
    <script src="../../js/jquery.min.js"></script>
    <script src="../../js/jquery.range.js"></script>
   	<style>
   		body {background-color: #fff;}
   		.mui-content-padded {margin: 0;padding-bottom: 5px;}
   		.input-box input {margin: 0;border: none;}
   		.input-box input:focus,input-box input:hover {background-color: #ddffeb;}
   		.rang-slider-bar {padding: 1.3em 0;}
   		.mui-btn.button-first {background-color: #31a25f;}
   		.mui-btn.button-next {background-color: #ff8474;}
   		.mui-button-row button {color: #bdbdbd;}
   		.mui-button-row button:nth-child(3),
   		.mui-button-row button:nth-child(4) {padding: 6px 1.3em;}
   		.mui-button-row .active-color {color: #35a462 ;border-color: #37a563;}
   	</style>
</head>
<body>
	<header class="mui-bar mui-bar-nav">
		<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
		<h1 class="mui-title">Filter</h1>
	</header>
	<div class="mui-content">
		<ul class="mui-table-view">
			<li class="mui-table-view-cell">
				<div class="mui-content-padded">Departure</div>
				<div class="input-box">
					<input class="mui-input-clear" type="text" name="departure" id="departure" value="" />
				</div>
			</li>
			<li class="mui-table-view-cell">
				<div class="mui-content-padded">Destination</div>
				<div class="input-box">
					<input class="mui-input-clear" type="text" name="departure" id="destination" value="" />
				</div>
			</li>
			<li class="mui-table-view-cell">
				<div class="mui-content-padded">Remain <span class="mui-h5"> (more than)</span></div>
				<div class="mui-button-row">
					<button data-time="10">10 hour</button>
					<button data-time="24">24 hour</button>
					<button data-time="48">2 day</button>
					<button data-time='120'>5 day</button>
				</div>
			</li>
			<li class="mui-table-view-cell">
				<div class="mui-content-padded">Reword</div>
				<div class="rang-slider-bar">
					<input class="range-reward" type="hidden" value="0,50" id="reword"/>
				</div>
			</li>
			<li class="mui-table-view-cell">
				<div class="mui-content-padded">Weight</div>
				<div class="rang-slider-bar">
					<input class="range-weight" type="hidden" value="0,100" id="weight"/>
				</div>
			</li>
		</ul>
	</div>
	<footer style="height: 3.2em;" class="mui-bar mui-bar-footer mui-text-center bg-color">
		<button id="ok-btn" class="mui-btn button-first">Ok</button>
		<button id="cancel" class="mui-btn button-next">Cancel</button>
	</footer>
	<script src="../../js/utils.js"></script>
	<script>
      	mui.init();
      	jQuery(function(){
      		var time = "";
      		var reword = "";
      		var weight = "";
  			$('.range-reward').jRange({
				from: 0,
				to: 50,
				step: 1,
				scale: ["$0","$10","$20","$30","$40","$50"],
				format: '%s',
				width: $(".rang-slider-bar").width(),
				showLabels: true,
				isRange : true,
				onstatechange:function(){
					reword = $('#reword').val();
				}
			});
			$('.range-weight').jRange({
				from: 0,
				to: 100,
				step: 1,
				scale: ["0kg","20kg","40kg","60kg","80kg","100kg"],
				format: '%s',
				width: $(".rang-slider-bar").width(),
				showLabels: true,
				isRange : true,
				onstatechange:function(){
					weight = $('#weight').val();
				}
			});
			$(".mui-button-row").on("tap", "button", function(){
				time = $(this).attr('data-time')
				$(".mui-button-row").find("button").removeClass("active-color");
				$(this).addClass("active-color");
			})
			
			// 取消按钮
			document.getElementById("cancel").addEventListener("tap", function(){
//				mui.back();
			}, false)
			
			// ok 按钮
			document.getElementById("ok-btn").addEventListener("tap", function(){
				var filterdata = {};
				filterdata.sendAddr = $('#departure').val();
				filterdata.receiveAddr = $('#destination').val();
				filterdata.finTime = time;
				filterdata.prices = reword;
				filterdata.weights = weight;
				showobj(filterdata)
				var order = plus.webview.getWebviewById('getorder/get-order');
				order.show('slide-in-left',200);
				plus.webview.currentWebview().close();
				mui.fire(order,'getfilter',filterdata)
			},false)
      	})
    </script>
</body>
</html>